{"version":3,"sources":["../src/createLoader.js"],"names":[],"mappings":";;AAAA;AACA,eAAe,SAAS,YAAT,CAAsB,YAAtB,EAAqD,QAArD,EAAwE;AAAA,iBAAlD,YAAkD,mBAAlD,YAAkD,YAA3B,MAA2B;AAAA,uIAAlD,YAAkD;AAAA;;AAAA,UAAnB,QAAmB,YAAnB,QAAmB,YAAR,MAAQ;AAAA,yHAAnB,QAAmB;AAAA;;AACnF,QAAI,QAAO,YAAP,yCAAO,YAAP,OAAwB,QAA5B,EAAsC;AAClC,mBAAW,YAAX;AACA,uBAAe;AAAA,mBAAO,EAAP;AAAA,SAAf;AACH;;AAED,QAAM,aAAa,IAAI,GAAJ,CAAQ,OAAO,IAAP,CAAY,QAAZ,EAAsB,GAAtB,CAA0B;AAAA,eAAO,CAAC,GAAD,EAAM,SAAS,GAAT,CAAN,CAAP;AAAA,KAA1B,CAAR,CAAnB;AACA,eAAW,SAAX;;AAEA,WAAO,YAAkC;AAAA,YAAjC,KAAiC,yDAAzB,cAAyB;AAAA,YAAT,IAAS;;AACrC,YAAM,OAAO,OAAO,IAAP,CAAY,IAAZ,CAAb;AACA,eAAO,QAAQ,GAAR,CAAY,KAAK,GAAL,CAAS,eAAO;AAC/B,gBAAM,UAAU,WAAW,GAAX,CAAe,GAAf,CAAhB;AACA,gBAAmB,CAAC,OAApB,EAA6B,MAAM,IAAI,KAAJ,2BAAkC,GAAlC,QAAN;AAC7B,mBAAO,QAAQ,KAAR,EAAe,KAAK,GAAL,CAAf,CAAP;AACH,SAJkB,CAAZ,EAIH,IAJG,CAIE,mBAAW;AAChB,oBAAQ,OAAR,CAAgB,UAAC,MAAD,EAAS,KAAT,EAAmB;AAC/B,sBAAM,KAAK,KAAL,CAAN,IAAqB,MAArB;AACH,aAFD;AAGA,mBAAO,KAAP;AACH,SATM,CAAP;AAUH,KAZD;AAaH","file":"createLoader.js","sourcesContent":["/* global PRODUCTION */\nexport default function createLoader(defaultState: Function|Object, handlers: ?Object) {\n    if (typeof defaultState === 'object') {\n        handlers = defaultState;\n        defaultState = () => ({});\n    }\n\n    const handlerMap = new Map(Object.keys(handlers).map(key => [key, handlers[key]]));\n    handlers = undefined;\n\n    return (state = defaultState(), data) => {\n        const keys = Object.keys(data);\n        return Promise.all(keys.map(key => {\n            const handler = handlerMap.get(key);\n            if (!PRODUCTION && !handler) throw new Error(`Missing handler for \"${key}\".`);\n            return handler(state, data[key]);\n        })).then(results => {\n            results.forEach((result, index) => {\n                state[keys[index]] = result;\n            });\n            return state;\n        });\n    };\n}\n"]}