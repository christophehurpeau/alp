{"version":3,"sources":["../../src/utils/createLoader.js"],"names":["createLoader","handlers","handlerMap","Map","Object","keys","map","key","state","data","Promise","all","handler","get","Error","then","create","results","forEach","result","index"],"mappings":";AAAA;AACA,eAAe,SAASA,YAAT,CAAsBC,QAAtB,EAAyC;AAAA,sBAAX,WAAG,UAAH,CAAW;;AAAA;;AACtD,MAAMC,aAAa,IAAIC,GAAJ,CAAQC,OAAOC,IAAP,CAAYJ,QAAZ,EAAsBK,GAAtB,CAA0B;AAAA,WAAO,CAACC,GAAD,EAAMN,SAASM,GAAT,CAAN,CAAP;AAAA,GAA1B,CAAR,CAAnB;;;AAGA,SAFAN,uCAEA,EAAO,UAACO,KAAD,EAAQC,IAAR,EAAiB;AACtB,QAAMJ,OAAOD,OAAOC,IAAP,CAAYI,IAAZ,CAAb;AACA,WAAOC,QAAQC,GAAR,CACLN,KAAKC,GAAL,CAAS,eAAO;AACd,UAAMM,UAAUV,WAAWW,GAAX,CAAeN,GAAf,CAAhB;AACA,UAAmB,CAACK,OAApB,EAA6B,MAAM,IAAIE,KAAJ,4BAAkCP,GAAlC,SAAN;AAC7B,aAAOK,QAAQJ,KAAR,EAAeC,KAAKF,GAAL,CAAf,CAAP;AACD,KAJD,CADK,EAMLQ,IANK,CAMA,mBAAW;AAChB,UAAMN,OAAOL,OAAOY,MAAP,CAAc,IAAd,CAAb;;AAIA,aAHAC,QAAQC,OAAR,CAAgB,UAACC,MAAD,EAASC,KAAT,EAAmB;AACjCX,aAAKJ,KAAKe,KAAL,CAAL,IAAoBD,MADa;AAElC,OAFD,CAGA,EAAOV,IAAP;AACD,KAZM,CAAP;AAaD,GAfD;AAgBD","file":"createLoader.js","sourcesContent":["/* global PRODUCTION */\nexport default function createLoader(handlers: ?Object) {\n  const handlerMap = new Map(Object.keys(handlers).map(key => [key, handlers[key]]));\n  handlers = undefined;\n\n  return (state, data) => {\n    const keys = Object.keys(data);\n    return Promise.all(\n      keys.map(key => {\n        const handler = handlerMap.get(key);\n        if (!PRODUCTION && !handler) throw new Error(`Missing handler for \"${key}\".`);\n        return handler(state, data[key]);\n      }),\n    ).then(results => {\n      const data = Object.create(null);\n      results.forEach((result, index) => {\n        data[keys[index]] = result;\n      });\n      return data;\n    });\n  };\n}\n"]}