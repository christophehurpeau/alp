{"version":3,"sources":["../../src/utils/createLoader.js"],"names":["createLoader","handlers","handlerMap","Map","Object","keys","map","key","undefined","state","data","Promise","all","handler","get","then","results","create","forEach","result","index"],"mappings":"AAAA;AACA,eAAe,SAASA,YAAT,CAAsBC,QAAtB,EAAyC;AACtD,MAAMC,aAAa,IAAIC,GAAJ,CAAQC,OAAOC,IAAP,CAAYJ,QAAZ,EAAsBK,GAAtB,CAA0BC,OAAO,CAACA,GAAD,EAAMN,SAASM,GAAT,CAAN,CAAjC,CAAR,CAAnB;AACAN,aAAWO,SAAX;;AAEA,SAAO,CAACC,KAAD,EAAQC,IAAR,KAAiB;AACtB,QAAML,OAAOD,OAAOC,IAAP,CAAYK,IAAZ,CAAb;AACA,WAAOC,QAAQC,GAAR,CAAYP,KAAKC,GAAL,CAASC,OAAO;AACjC,UAAMM,UAAUX,WAAWY,GAAX,CAAeP,GAAf,CAAhB;;AAEA,aAAOM,QAAQJ,KAAR,EAAeC,KAAKH,GAAL,CAAf,CAAP;AACD,KAJkB,CAAZ,EAIHQ,IAJG,CAIEC,WAAW;AAClB,UAAMN,OAAON,OAAOa,MAAP,CAAc,IAAd,CAAb;AACAD,cAAQE,OAAR,CAAgB,CAACC,MAAD,EAASC,KAAT,KAAmB;AACjCV,aAAKL,KAAKe,KAAL,CAAL,IAAoBD,MAApB;AACD,OAFD;AAGA,aAAOT,IAAP;AACD,KAVM,CAAP;AAWD,GAbD;AAcD","file":"createLoader.js","sourcesContent":["/* global PRODUCTION */\nexport default function createLoader(handlers: ?Object) {\n  const handlerMap = new Map(Object.keys(handlers).map(key => [key, handlers[key]]));\n  handlers = undefined;\n\n  return (state, data) => {\n    const keys = Object.keys(data);\n    return Promise.all(keys.map(key => {\n      const handler = handlerMap.get(key);\n      if (!PRODUCTION && !handler) throw new Error(`Missing handler for \"${key}\".`);\n      return handler(state, data[key]);\n    })).then(results => {\n      const data = Object.create(null);\n      results.forEach((result, index) => {\n        data[keys[index]] = result;\n      });\n      return data;\n    });\n  };\n}\n"]}