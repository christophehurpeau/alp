{"version":3,"sources":["../../src/store/createBrowserStore.js"],"names":["createStore","applyMiddleware","compose","combineReducers","promiseMiddleware","createFunctionMiddleware","identityReducer","app","ctx","moduleReducer","middlewares","sharedReducers","reducers","reduxReducers","module","Object","keys","forEach","key","Error","rootReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","reduxMiddlewares","__INITIAL_DATA__"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,eAAtB,EAAuCC,OAAvC,EAAgDC,eAAhD;AACA,SAASC,iBAAT,EAA4BC,wBAA5B,QAA4D,sBAA5D;AACA,OAAOC,eAAP,MAA4B,0BAA5B;;AAEA,gBAAe,4BAACC,GAAD,EAAMC,GAAN,EAAWC,aAAX,EAA0B,EAAEC,WAAF,EAAeC,cAAf,EAA1B,EAA8D;AAC3E,QAAMC,6BACDL,IAAIM,aADH,EAEDF,cAFC;AAGJH,SAAKF,eAHD;AAIJQ,YAAQL;AAJJ,IAAN;;AAQEM,SAAOC,IAAP,CAAYJ,QAAZ,EAAsBK,OAAtB,CAA8B,eAAO;AACnC,QAAI,OAAOL,SAASM,GAAT,CAAP,KAAyB,UAA7B,EAAyC,MAAM,IAAIC,KAAJ,CAAW,mBAAkBD,GAAI,EAAjC,CAAN;AAC1C,GAFD;;;AAKF,QAAME,cAAcjB,gBAAgBS,QAAhB,CAApB;;AAEA,QAAMS,mBAAmBC,OAAOC,oCAAP,IAA+CrB,OAAxE;;AAEAQ,gBAAc,CACZL,yBAAyBE,GAAzB,CADY,EAEZH,iBAFY,EAGZ,GAAGG,IAAIiB,gBAHK,EAIZ,GAAGd,WAJS,CAAd;;AAOA,SAAOV,YACLoB,WADK,kBAEHZ,GAFG,IAEKc,OAAOG,gBAFZ,GAGLJ,iBAAiBpB,gBAAgB,GAAGS,WAAnB,CAAjB,CAHK,CAAP;AAKD,CA9BD","file":"createBrowserStore.js","sourcesContent":["import { createStore, applyMiddleware, compose, combineReducers } from 'redux/src';\nimport { promiseMiddleware, createFunctionMiddleware } from './middleware-browser';\nimport identityReducer from '../utils/identityReducer';\n\nexport default (app, ctx, moduleReducer, { middlewares, sharedReducers }) => {\n  const reducers = {\n    ...app.reduxReducers,\n    ...sharedReducers,\n    ctx: identityReducer,\n    module: moduleReducer,\n  };\n\n  if (!PRODUCTION) {\n    Object.keys(reducers).forEach(key => {\n      if (typeof reducers[key] !== 'function') throw new Error(`Invalid reducer ${key}`);\n    });\n  }\n\n  const rootReducer = combineReducers(reducers);\n\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n  middlewares = [\n    createFunctionMiddleware(app),\n    promiseMiddleware,\n    ...app.reduxMiddlewares,\n    ...middlewares,\n  ];\n\n  return createStore(\n    rootReducer,\n    { ctx, ...window.__INITIAL_DATA__ },\n    composeEnhancers(applyMiddleware(...middlewares)),\n  );\n};\n"]}