{"version":3,"sources":["../../src/layout/uneval.js"],"names":["uneval","obj","keys","objects","Set","undefined","Infinity","Number","isNaN","console","log","Error","JSON","stringify","has","add","Array","map","o","index","join","Date","getTime","from","Map","Object","key","UNSAFE_CHARS_REGEXP","ESCAPED_CHARS","escapeUnsafeChars","unsafeChar","replace"],"mappings":"AAAA;;AAEA,SAASA,MAAT,CAAgBC,GAAhB,EAAqBC,IAArB,EAA2BC,UAAU,IAAIC,GAAJ,EAArC,EAAgD;AAC9C,UAAQH,GAAR;AACE,SAAK,IAAL;AACE,aAAO,MAAP;AACF,SAAKI,SAAL;AACE,aAAO,WAAP;AACF,SAAKC,QAAL;AACE,aAAO,UAAP;AACF,SAAK,CAACA,QAAN;AACE,aAAO,WAAP;AARJ;;AAWA,MAAIC,OAAOC,KAAP,CAAaP,GAAb,CAAJ,EAAuB;AACrB,WAAO,KAAP;AACD;;AAED,UAAQ,OAAOA,GAAf;AACE,SAAK,UAAL;AACmBQ,cAAQC,GAAR,CAAYT,GAAZ;AACjB,YAAM,IAAIU,KAAJ,CAA0B,yBAAwBT,IAAK,IAAvD,CAAN;AACF,SAAK,QAAL;AACA,SAAK,QAAL;AACA,SAAK,SAAL;AACE,aAAOU,KAAKC,SAAL,CAAeZ,GAAf,CAAP;AAPJ;;AAUA,MAAIE,QAAQW,GAAR,CAAYb,GAAZ,CAAJ,EAAsB;AACpB,UAAM,IAAIU,KAAJ,gCAAN;AACD;;AAEDR,UAAQY,GAAR,CAAYd,GAAZ;;AAEA;AACA,MAAIA,eAAee,KAAnB,EAA0B;AACxB,WAAQ,IAAGf,IACRgB,GADQ,CACJ,UAACC,CAAD,EAAIC,KAAJ;AAAA,aAAcnB,OAAOkB,CAAP,EAA0B,GAAEhB,IAAK,IAAGiB,KAAM,GAA1C,EAA8ChB,OAA9C,CAAd;AAAA,KADI,EAERiB,IAFQ,CAEH,GAFG,CAEE,GAFb;AAGD;;AAED,MAAInB,eAAeoB,IAAnB,EAAyB;AACvB,WAAQ,YAAWpB,IAAIqB,OAAJ,EAAc,GAAjC;AACD;;AAED,MAAIrB,eAAeG,GAAnB,EAAwB;AACtB,WAAQ,WAAUJ,OAAOgB,MAAMO,IAAN,CAAWtB,GAAX,CAAP,EAAwBC,IAAxB,CAA8B,GAAhD;AACD;;AAED,MAAID,eAAeuB,GAAnB,EAAwB;AACtB,WAAQ,WAAUxB,OAAOgB,MAAMO,IAAN,CAAWtB,GAAX,CAAP,EAAwBC,IAAxB,CAA8B,GAAhD;AACD;;AAED,SAAQ,IAAGuB,OAAOvB,IAAP,CAAYD,GAAZ,EACRgB,GADQ,CACJ;AAAA,WAAQ,GAAEL,KAAKC,SAAL,CAAea,GAAf,CAAoB,IAAG1B,OAAOC,IAAIyB,GAAJ,CAAP,EAAiC,GAAExB,IAAK,IAAGwB,GAAI,EAA/C,CAAkD,EAAnF;AAAA,GADI,EAERN,IAFQ,CAEH,GAFG,CAEE,GAFb;AAGD;;AAED;AACA,MAAMO,sBAAsB,oBAA5B;AACA,MAAMC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAN;;AAQA,MAAMC,oBAAoB,SAApBA,iBAAoB;AAAA,SAAcD,cAAcE,UAAd,CAAd;AAAA,CAA1B;;AAEA,gBAAe;AAAA,SAAO9B,OAAOC,GAAP,EAAY,KAAZ,EAAmB8B,OAAnB,CAA2BJ,mBAA3B,EAAgDE,iBAAhD,CAAP;AAAA,CAAf","file":"uneval.js","sourcesContent":["/* global PRODUCTION */\n\nfunction uneval(obj, keys, objects = new Set()) {\n  switch (obj) {\n    case null:\n      return 'null';\n    case undefined:\n      return 'undefined';\n    case Infinity:\n      return 'Infinity';\n    case -Infinity:\n      return '-Infinity';\n  }\n\n  if (Number.isNaN(obj)) {\n    return 'NaN';\n  }\n\n  switch (typeof obj) {\n    case 'function':\n      if (!PRODUCTION) console.log(obj);\n      throw new Error(!PRODUCTION && `Unsupported function \"${keys}\".`);\n    case 'string':\n    case 'number':\n    case 'boolean':\n      return JSON.stringify(obj);\n  }\n\n  if (objects.has(obj)) {\n    throw new Error(!PRODUCTION && 'Circular reference detected.');\n  }\n\n  objects.add(obj);\n\n  // specialized types\n  if (obj instanceof Array) {\n    return `[${obj\n      .map((o, index) => uneval(o, !PRODUCTION && `${keys}[${index}]`, objects))\n      .join(',')}]`;\n  }\n\n  if (obj instanceof Date) {\n    return `new Date(${obj.getTime()})`;\n  }\n\n  if (obj instanceof Set) {\n    return `new Set(${uneval(Array.from(obj), keys)})`;\n  }\n\n  if (obj instanceof Map) {\n    return `new Map(${uneval(Array.from(obj), keys)})`;\n  }\n\n  return `{${Object.keys(obj)\n    .map(key => `${JSON.stringify(key)}:${uneval(obj[key], !PRODUCTION && `${keys}.${key}`)}`)\n    .join(',')}}`;\n}\n\n// https://medium.com/node-security/the-most-common-xss-vulnerability-in-react-js-applications-2bdffbcc1fa0#.tm3hd6riw\nconst UNSAFE_CHARS_REGEXP = /[<>/\\u2028\\u2029]/g;\nconst ESCAPED_CHARS = {\n  '<': '\\\\u003C',\n  '>': '\\\\u003E',\n  '/': '\\\\u002F',\n  '\\u2028': '\\\\u2028',\n  '\\u2029': '\\\\u2029',\n};\n\nconst escapeUnsafeChars = unsafeChar => ESCAPED_CHARS[unsafeChar];\n\nexport default obj => uneval(obj, 'obj').replace(UNSAFE_CHARS_REGEXP, escapeUnsafeChars);\n"]}