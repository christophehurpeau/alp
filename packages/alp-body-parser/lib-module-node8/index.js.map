{"version":3,"sources":["../src/index.js"],"names":["parse","parseBody","type","ctx","request","body","Error","then","alpBodyParser","app","context","parseBodyJson","parseBodyText"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;;AAEA,SAASC,SAAT,CAAmBC,IAAnB,EAAyBC,GAAzB,EAA8B;AAC5B,MAAIA,IAAIC,OAAJ,CAAYC,IAAhB,EACE,MAAM,IAAIC,KAAJ,CAAU,2BAAV,CAAN;;AAGF,SAAON,MAAME,IAAN,EAAYC,GAAZ,EAAiBI,IAAjB,CAAsBF,SAC3BF,IAAIC,OAAJ,CAAYC,IAAZ,GAAmBA,IADQ,EAEpBA,IAFoB,CAAtB,CAAP;AAID;;AAED;;;AAGA,eAAe,SAASG,aAAT,CAAuBC,GAAvB,EAA4B;AACzCA,MAAIC,OAAJ,CAAYT,SAAZ,GAAwB,YAAW;AACjC,WAAOA,UAAU,MAAV,EAAkB,IAAlB,CAAP;AACD,GAHwC,EAKzCQ,IAAIC,OAAJ,CAAYC,aAAZ,GAA4B,YAAW;AACrC,WAAOV,UAAU,MAAV,EAAkB,IAAlB,CAAP;AACD,GAPwC,EASzCQ,IAAIC,OAAJ,CAAYE,aAAZ,GAA4B,YAAW;AACrC,WAAOX,UAAU,MAAV,EAAkB,IAAlB,CAAP;AACD,GAXwC;AAY1C","file":"index.js","sourcesContent":["import parse from 'co-body';\n\nfunction parseBody(type, ctx) {\n  if (ctx.request.body) {\n    throw new Error('Request is already parsed');\n  }\n\n  return parse[type](ctx).then(body => {\n    ctx.request.body = body;\n    return body;\n  });\n}\n\n/**\n * @param {Koa} app\n */\nexport default function alpBodyParser(app) {\n  app.context.parseBody = function() {\n    return parseBody('form', this);\n  };\n\n  app.context.parseBodyJson = function() {\n    return parseBody('json', this);\n  };\n\n  app.context.parseBodyText = function() {\n    return parseBody('text', this);\n  };\n}\n"]}