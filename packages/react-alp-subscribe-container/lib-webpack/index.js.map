{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;;;;AAAA,SAAS,SAAT,EAAoB,SAApB,QAAqC,OAArC;;IAEqB,2B;;;;;;;;;;;4CAWG;AAAA,yBACW,KAAK,KADhB;AAAA,gBACR,QADQ,UACR,QADQ;AAAA,gBACE,IADF,UACE,IADF;AAAA,gBAEU,SAFV,GAE4B,KAAK,OAFjC,CAER,OAFQ,CAEG,GAFH,CAEU,SAFV;;AAGhB,iBAAK,iBAAL,GAAyB,UAAU,EAAV,CAAa,SAAb,EAAwB,YAAM;AACnD,0BAAU,IAAV,gBAA4B,IAA5B,EACK,IADL,CACU;AAAA,2BAAU,UAAU,SAAS,MAAT,CAApB;AAAA,iBADV;AAEH,aAHwB,CAAzB;AAIA,gBAAI,UAAU,WAAV,EAAJ,EAA6B;AACzB,qBAAK,iBAAL;AACH;AACJ;;;+CAEsB;AAAA,gBACX,IADW,GACF,KAAK,KADH,CACX,IADW;AAAA,gBAEO,SAFP,GAEyB,KAAK,OAF9B,CAEX,OAFW,CAEA,GAFA,CAEO,SAFP;;AAGnB,gBAAI,UAAU,WAAV,EAAJ,EAA6B;AACzB,0BAAU,IAAV,kBAA8B,IAA9B;AACH;;AAED,sBAAU,GAAV,CAAc,SAAd,EAAyB,KAAK,iBAA9B;AACH;;;iCAEQ;AACL,mBAAO,KAAK,KAAL,CAAW,QAAlB;AACH;;;;EAnCoD,S;;AAApC,2B,CACV,S,GAAY;AACf,cAAU,UAAU,IAAV,CAAe,UADV;AAEf,UAAM,UAAU,MAAV,CAAiB,UAFR;AAGf,cAAU,UAAU;AAHL,C;AADF,2B,CAOV,Y,GAAe;AAClB,aAAS,UAAU;AADD,C;eAPL,2B","file":"index.js","sourcesContent":["import { PropTypes, Component } from 'react';\n\nexport default class SubscribeContainerComponent extends Component {\n    static propTypes = {\n        dispatch: PropTypes.func.isRequired,\n        name: PropTypes.string.isRequired,\n        children: PropTypes.node,\n    };\n\n    static contextTypes = {\n        context: PropTypes.object,\n    };\n\n    componentDidMount() {\n        const { dispatch, name } = this.props;\n        const { context: { app: { websocket } } } = this.context;\n        this._handlerConnected = websocket.on('connect', () => {\n            websocket.emit(`subscribe:${name}`)\n                .then(action => action && dispatch(action));\n        });\n        if (websocket.isConnected()) {\n            this._handlerConnected();\n        }\n    }\n\n    componentWillUnmount() {\n        const { name } = this.props;\n        const { context: { app: { websocket } } } = this.context;\n        if (websocket.isConnected()) {\n            websocket.emit(`unsubscribe:${name}`);\n        }\n\n        websocket.off('connect', this._handlerConnected);\n    }\n\n    render() {\n        return this.props.children;\n    }\n}\n"]}