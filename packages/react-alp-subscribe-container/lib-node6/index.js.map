{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;;;;;AAAA;;AAEe,MAAM,2BAAN,0BAAoD;;AAW/D,wBAAoB;AAAA,qBACW,KAAK,KADhB;AAAA,cACR,QADQ,UACR,QADQ;AAAA,cACE,IADF,UACE,IADF;AAAA,cAEU,SAFV,GAE4B,KAAK,OAFjC,CAER,OAFQ,CAEG,GAFH,CAEU,SAFV;;AAGhB,aAAK,iBAAL,GAAyB,UAAU,EAAV,CAAa,SAAb,EAAwB,MAAM;AACnD,sBAAU,IAAV,CAAe,CAAC,UAAD,GAAa,IAAb,EAAkB,AAAlB,CAAf,EACK,IADL,CACU,UAAU,UAAU,SAAS,MAAT,CAD9B;AAEH,SAHwB,CAAzB;AAIA,YAAI,UAAU,WAAV,EAAJ,EAA6B;AACzB,iBAAK,iBAAL;AACH;AACJ;;AAED,2BAAuB;AAAA,cACX,IADW,GACF,KAAK,KADH,CACX,IADW;AAAA,cAEO,SAFP,GAEyB,KAAK,OAF9B,CAEX,OAFW,CAEA,GAFA,CAEO,SAFP;;AAGnB,YAAI,UAAU,WAAV,EAAJ,EAA6B;AACzB,sBAAU,IAAV,CAAe,CAAC,YAAD,GAAe,IAAf,EAAoB,AAApB,CAAf;AACH;;AAED,kBAAU,GAAV,CAAc,SAAd,EAAyB,KAAK,iBAA9B;AACH;;AAED,aAAS;AACL,eAAO,KAAK,KAAL,CAAW,QAAlB;AACH;AAnC8D;kBAA9C,2B;AAAA,2B,CACV,S,GAAY;AACf,cAAU,iBAAU,IAAV,CAAe,UADV;AAEf,UAAM,iBAAU,MAAV,CAAiB,UAFR;AAGf,cAAU,iBAAU;AAHL,C;AADF,2B,CAOV,Y,GAAe;AAClB,aAAS,iBAAU;AADD,C","file":"index.js","sourcesContent":["import { PropTypes, Component } from 'react';\n\nexport default class SubscribeContainerComponent extends Component {\n    static propTypes = {\n        dispatch: PropTypes.func.isRequired,\n        name: PropTypes.string.isRequired,\n        children: PropTypes.node,\n    };\n\n    static contextTypes = {\n        context: PropTypes.object,\n    };\n\n    componentDidMount() {\n        const { dispatch, name } = this.props;\n        const { context: { app: { websocket } } } = this.context;\n        this._handlerConnected = websocket.on('connect', () => {\n            websocket.emit(`subscribe:${name}`)\n                .then(action => action && dispatch(action));\n        });\n        if (websocket.isConnected()) {\n            this._handlerConnected();\n        }\n    }\n\n    componentWillUnmount() {\n        const { name } = this.props;\n        const { context: { app: { websocket } } } = this.context;\n        if (websocket.isConnected()) {\n            websocket.emit(`unsubscribe:${name}`);\n        }\n\n        websocket.off('connect', this._handlerConnected);\n    }\n\n    render() {\n        return this.props.children;\n    }\n}\n"]}