{"version":3,"file":"index-node10.cjs.js","sources":["../src/index.ts"],"sourcesContent":["import { defineLazyProperty } from 'object-properties';\nimport { ApplicationInCreation, Context } from 'alp-types';\n\nexport default function alpLanguage(app: ApplicationInCreation): void {\n  const config = app.context.config;\n  const availableLanguages: string[] = config.get('availableLanguages');\n  if (!availableLanguages) {\n    throw new Error('Missing config \"availableLanguages\"');\n  }\n\n  defineLazyProperty(app.context, 'language', function (this: Context) {\n    return this.acceptsLanguages(availableLanguages) || availableLanguages[0];\n  });\n\n  defineLazyProperty(app.context, 'firstAcceptedLanguage', function (\n    this: Context,\n  ) {\n    return this.acceptsLanguages()[0] || availableLanguages[0];\n  });\n}\n"],"names":["alpLanguage","app","config","context","availableLanguages","get","Error","defineLazyProperty","acceptsLanguages"],"mappings":";;;;;;AAGe,SAASA,WAAT,CAAqBC,GAArB,EAAuD;AACpE,QAAMC,MAAM,GAAGD,GAAG,CAACE,OAAJ,CAAYD,MAA3B;AACA,QAAME,kBAA4B,GAAGF,MAAM,CAACG,GAAP,CAAW,oBAAX,CAArC;;AACA,MAAI,CAACD,kBAAL,EAAyB;AACvB,UAAM,IAAIE,KAAJ,CAAU,qCAAV,CAAN;AACD;;AAEDC,EAAAA,mCAAkB,CAACN,GAAG,CAACE,OAAL,EAAc,UAAd,EAA0B,YAAyB;AACnE,WAAO,KAAKK,gBAAL,CAAsBJ,kBAAtB,KAA6CA,kBAAkB,CAAC,CAAD,CAAtE;AACD,GAFiB,CAAlB;AAIAG,EAAAA,mCAAkB,CAACN,GAAG,CAACE,OAAL,EAAc,uBAAd,EAAuC,YAEvD;AACA,WAAO,KAAKK,gBAAL,GAAwB,CAAxB,KAA8BJ,kBAAkB,CAAC,CAAD,CAAvD;AACD,GAJiB,CAAlB;AAKD;;;;"}