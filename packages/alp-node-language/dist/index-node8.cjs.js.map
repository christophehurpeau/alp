{"version":3,"file":"index-node8.cjs.js","sources":["../src/index.ts"],"sourcesContent":["import { defineLazyProperty } from 'object-properties';\nimport { ApplicationInCreation, Context } from 'alp-types';\n\nexport default function alpLanguage(app: ApplicationInCreation): void {\n  const config = app.context.config;\n  const availableLanguages: string[] = config.get('availableLanguages');\n  if (!availableLanguages) {\n    throw new Error('Missing config \"availableLanguages\"');\n  }\n\n  defineLazyProperty(app.context, 'language', function(this: Context) {\n    return this.acceptsLanguages(availableLanguages) || availableLanguages[0];\n  });\n\n  defineLazyProperty(app.context, 'firstAcceptedLanguage', function(\n    this: Context,\n  ) {\n    return this.acceptsLanguages()[0] || availableLanguages[0];\n  });\n}\n"],"names":["alpLanguage","app","config","context","availableLanguages","get","Error","defineLazyProperty","acceptsLanguages"],"mappings":";;;;;;AAGe,SAASA,WAAT,CAAqBC,GAArB,EAAuD;QAC9DC,MAAM,GAAGD,GAAG,CAACE,OAAJ,CAAYD,MAA3B;QACME,kBAA4B,GAAGF,MAAM,CAACG,GAAP,CAAW,oBAAX,CAArC;;MACI,CAACD,kBAAL,EAAyB;UACjB,IAAIE,KAAJ,CAAU,qCAAV,CAAN;;;EAGFC,mCAAkB,CAACN,GAAG,CAACE,OAAL,EAAc,UAAd,EAA0B,YAAwB;WAC3D,KAAKK,gBAAL,CAAsBJ,kBAAtB,KAA6CA,kBAAkB,CAAC,CAAD,CAAtE;GADgB,CAAlB;EAIAG,mCAAkB,CAACN,GAAG,CAACE,OAAL,EAAc,uBAAd,EAAuC,YAEvD;WACO,KAAKK,gBAAL,GAAwB,CAAxB,KAA8BJ,kBAAkB,CAAC,CAAD,CAAvD;GAHgB,CAAlB;;;;;"}