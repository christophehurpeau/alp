{"version":3,"sources":["../src/server.js"],"names":[],"mappings":";;AACA;;;;AACA;;AACA;;;;AAEA,uB,CALA;;AAMA,uBAAQ,IAAR,CAAa,WAAW;AACpB,UAAM,SAAS,6BAAW,CACtB,WADsB,EAEtB,cAFsB,EAGtB,+BAHsB,EAItB,QAJsB,EAKtB,uBAAK,SALiB,EAMtB,WANsB,EAOrB,OAAK,KAAK,GAAL,EAAW,GAPK,CAAX,CAAf;;AAUA,YAAQ,EAAR,CAAW,MAAX,EAAmB,MAAM;AACrB,YAAI,MAAJ,EAAY;AACR,mBAAO,IAAP;AACH;AACJ,KAJD;;AAMA,WAAO,KAAP;;AAEA,QAAI,eAAJ;AACA,YAAQ,EAAR,CAAW,SAAX,EAAsB,MAAM;AACxB,YAAI,eAAJ,EAAqB,aAAa,eAAb;AACrB,eAAO,IAAP,CAAY,OAAO,IAAP,CAAY,MAAZ,GAAqB,CAAjC,IAAuC,OAAK,KAAK,GAAL,EAAW,GAAvD;AACA,0BAAkB,OAAO,cAAP,CAAsB,IAAtB,CAAlB;AACH,KAJD;AAKH,CAzBD","file":"server.js","sourcesContent":["// const bsReload = require('./bs-reload');\nimport argv from 'minimist-argv';\nimport { node as nodeDaemon } from 'springbokjs-daemon/src';\nimport { clean, watch } from './pob-build';\n\nclean();\nwatch().then(emitter => {\n    const daemon = nodeDaemon([\n        '--harmony',\n        '--es_staging',\n        'lib-node6-dev/index.server.js',\n        '--port',\n        argv.proxyPort,\n        '--version',\n        `dev${Date.now()}`,\n    ]);\n\n    process.on('exit', () => {\n        if (daemon) {\n            daemon.stop();\n        }\n    });\n\n    daemon.start();\n\n    let _restartTimeout;\n    emitter.on('changed', () => {\n        if (_restartTimeout) clearTimeout(_restartTimeout);\n        daemon.args[daemon.args.length - 1] = `dev${Date.now()}`;\n        _restartTimeout = daemon.restartTimeout(1000);\n    });\n});\n"]}