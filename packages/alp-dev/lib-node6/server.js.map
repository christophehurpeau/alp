{"version":3,"sources":["../src/server.js"],"names":[],"mappings":";;AACA;;;;AACA;;AACA;;;;AAEA,uB,CALA;;AAMA,uBAAQ,IAAR,CAAa,WAAW;AACtB,QAAM,SAAS,6BAAW,CACxB,WADwB,EAExB,cAFwB,EAGxB,+BAHwB,EAIxB,QAJwB,EAKxB,uBAAK,SALmB,EAMxB,WANwB,EAOvB,OAAK,KAAK,GAAL,EAAW,GAPO,CAAX,CAAf;;AAUA,UAAQ,EAAR,CAAW,MAAX,EAAmB,MAAM;AACvB,QAAI,MAAJ,EAAY;AACV,aAAO,IAAP;AACD;AACF,GAJD;;AAMA,SAAO,KAAP;;AAEA,MAAI,eAAJ;AACA,UAAQ,EAAR,CAAW,SAAX,EAAsB,MAAM;AAC1B,QAAI,eAAJ,EAAqB,aAAa,eAAb;AACrB,WAAO,IAAP,CAAY,OAAO,IAAP,CAAY,MAAZ,GAAqB,CAAjC,IAAuC,OAAK,KAAK,GAAL,EAAW,GAAvD;AACA,sBAAkB,OAAO,cAAP,CAAsB,IAAtB,CAAlB;AACD,GAJD;AAKD,CAzBD","file":"server.js","sourcesContent":["// const bsReload = require('./bs-reload');\nimport argv from 'minimist-argv';\nimport { node as nodeDaemon } from 'springbokjs-daemon/src';\nimport { clean, watch } from './pob-build';\n\nclean();\nwatch().then(emitter => {\n  const daemon = nodeDaemon([\n    '--harmony',\n    '--es_staging',\n    'lib-node6-dev/index.server.js',\n    '--port',\n    argv.proxyPort,\n    '--version',\n    `dev${Date.now()}`,\n  ]);\n\n  process.on('exit', () => {\n    if (daemon) {\n      daemon.stop();\n    }\n  });\n\n  daemon.start();\n\n  let _restartTimeout;\n  emitter.on('changed', () => {\n    if (_restartTimeout) clearTimeout(_restartTimeout);\n    daemon.args[daemon.args.length - 1] = `dev${Date.now()}`;\n    _restartTimeout = daemon.restartTimeout(1000);\n  });\n});\n"]}