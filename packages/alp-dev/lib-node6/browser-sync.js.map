{"version":3,"sources":["../src/browser-sync.js"],"names":[],"mappings":";;;;;AAAA;;;;AAIA,MAAM,OAAO,QAAQ,eAAR,CAAb;AACA,MAAM,cAAc,QAAQ,cAAR,CAApB;AACA,MAAM,UAAU,QAAQ,SAAR,CAAhB;AACA,MAAM,uBAAuB,QAAQ,wBAAR,CAA7B;AACA,MAAM,uBAAuB,QAAQ,wBAAR,CAA7B;;AAEA;;;AAGA,MAAM,gBAAgB,QAAQ,mBAAR,CAAtB;;AAEA,MAAM,UAAU,QAAQ,aAAR,CAAhB;;AAEA,MAAM,OAAO,KAAK,IAAL,IAAa,IAA1B;;AAEA;;;kBAGe,YAAY;AACvB,UAAM,KAAK,IADY;AAEvB,UAAM,IAFiB;AAGvB,QAAI,EAAE,MAAM,OAAO,CAAf,EAHmB;;AAKvB,eAAW;AACP,gBAAQ,KADD;AAEP,eAAO,KAFA;AAGP,gBAAQ;AAHD,KALY;;AAWvB,WAAO;AACH,gBAAS,cAAY,KAAK,SAAU,GADjC;AAEH,sBAAc,EAAE,MAAM,IAAR,EAFX;AAGH,oBAAY;AACR;AACA,kBAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AACtB,gBAAI,CAAC,IAAI,OAAJ,CAAY,kBAAZ,CAAL,EAAsC;AAClC,oBAAI,OAAJ,CAAY,kBAAZ,IAAkC,IAAI,OAAJ,CAAY,IAA9C;AACH;AACD;AACH,SAPO,EASR,qBAAqB,OAArB,EAA8B;AAC1B;AACA;AACA,wBAAY,cAAc,MAAd,CAAqB,UAHP;;AAK1B;AACA,mBAAO,EAAE,QAAQ,IAAV,EANmB;;AAQ1B,oBAAQ;AARkB,SAA9B,CATQ;;AAsBR;AACA,6BAAqB,OAArB,CAvBQ;AAHT,KAXgB;;AAyCvB,iBAAa,CAAC,QAAD,CAzCU;;AA2CvB;AACA;AACA,WAAO,CACH,iBADG;AA7CgB,CAAZ,C","file":"browser-sync.js","sourcesContent":["/**\n * https://github.com/BrowserSync/recipes/blob/master/recipes/webpack.react-hot-loader/app.js\n * Require Browsersync along with webpack and middleware for it\n */\nconst argv = require('minimist-argv');\nconst browserSync = require('browser-sync');\nconst webpack = require('webpack');\nconst webpackDevMiddleware = require('webpack-dev-middleware');\nconst webpackHotMiddleware = require('webpack-hot-middleware');\n\n/**\n * Require ./webpack.config.js and make a bundler from it\n */\nconst webpackConfig = require('../webpack.config');\n\nconst bundler = webpack(webpackConfig);\n\nconst port = argv.port || 3000;\n\n/**\n * Run Browsersync and use middleware for Hot Module Replacement\n */\nexport default browserSync({\n    open: argv.open,\n    port: port,\n    ui: { port: port + 1 },\n\n    ghostMode: {\n        clicks: false,\n        forms: false,\n        scroll: true,\n    },\n\n    proxy: {\n        target: `localhost:${argv.proxyPort}`,\n        proxyOptions: { xfwd: true },\n        middleware: [\n            // headers\n            function (req, res, next) {\n                if (!req.headers['X-Forwarded-Host']) {\n                    req.headers['X-Forwarded-Host'] = req.headers.host;\n                }\n                next();\n            },\n\n            webpackDevMiddleware(bundler, {\n                // IMPORTANT: dev middleware can't access config, so we should\n                // provide publicPath by ourselves\n                publicPath: webpackConfig.output.publicPath,\n\n                // pretty colored output\n                stats: { colors: true },\n\n                noInfo: true,\n                // for other settings see\n                // http://webpack.github.io/docs/webpack-dev-middleware.html\n            }),\n\n            // bundler should be the same as above\n            webpackHotMiddleware(bundler),\n        ],\n    },\n\n    serveStatic: ['public'],\n\n    // no need to watch '*.js' here, webpack will take care of it for us,\n    // including full page reloads if HMR won't work\n    files: [\n        'public/**/*.css',\n    ],\n});\n"]}