{"version":3,"sources":["../src/config-build.js"],"names":["glob","require","readFile","writeFile","dirname","join","loadConfigFile","clean","build","src","Promise","all","sync","map","filename","then","content","serverConfig","browserConfig","destFile","slice","length","JSON","stringify","watch"],"mappings":";;;;;AAAA,MAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,MAAMC,WAAWD,QAAQ,kBAAR,CAAjB;AACA,MAAME,YAAYF,QAAQ,mBAAR,CAAlB;AACA,MAAM,EAAEG,OAAF,EAAWC,IAAX,KAAoBJ,QAAQ,MAAR,CAA1B;AACA,MAAMK,iBAAiBL,QAAQ,wBAAR,CAAvB;;AAEO,MAAMM,wBAAQ,MAAM,CAAE,CAAtB;;AAEA,MAAMC,wBAAQ,CAACC,MAAM,cAAP,KACnBC,QAAQC,GAAR,CACEX,KAAKY,IAAL,CAAUP,KAAKI,GAAL,EAAU,UAAV,CAAV,EAAiCI,GAAjC,CAAqCC,YACnCZ,SAASY,QAAT,EAAmBC,IAAnB,CAAwBC,WAAW;AACjC,QAAM,CAACC,YAAD,EAAeC,aAAf,IAAgCZ,eAAeU,OAAf,EAAwBZ,QAAQU,QAAR,CAAxB,CAAtC;AACA,QAAMK,WAAY,GAAEL,SAASM,KAAT,CAAe,OAAOC,MAAtB,EAA8B,CAAC,MAAMA,MAArC,CAA6C,MAAjE;;AAEA,SAAOX,QAAQC,GAAR,CAAY,CACjBR,UAAW,SAAQgB,QAAS,EAA5B,EAA+BG,KAAKC,SAAL,CAAeN,YAAf,CAA/B,CADiB,EAEjBd,UAAW,UAASgB,QAAS,EAA7B,EAAgCG,KAAKC,SAAL,CAAeL,aAAf,CAAhC,CAFiB,CAAZ,CAAP;AAID,CARD,CADF,CADF,CADK;;AAeA,MAAMM,wBAAQ,MAAQ,CAAE,CAAxB","file":"config-build.js","sourcesContent":["const glob = require('glob');\nconst readFile = require('./utils/readFile');\nconst writeFile = require('./utils/writeFile');\nconst { dirname, join } = require('path');\nconst loadConfigFile = require('./utils/loadConfigFile');\n\nexport const clean = () => {};\n\nexport const build = (src = './src/config') =>\n  Promise.all(\n    glob.sync(join(src, '**/*.yml')).map(filename =>\n      readFile(filename).then(content => {\n        const [serverConfig, browserConfig] = loadConfigFile(content, dirname(filename));\n        const destFile = `${filename.slice('src/'.length, -'yml'.length)}json`;\n\n        return Promise.all([\n          writeFile(`build/${destFile}`, JSON.stringify(serverConfig)),\n          writeFile(`public/${destFile}`, JSON.stringify(browserConfig)),\n        ]);\n      }),\n    ),\n  );\n\nexport const watch = envs => {};\n"]}