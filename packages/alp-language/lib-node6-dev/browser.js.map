{"version":3,"sources":["../src/browser.js"],"names":[],"mappings":";;;;;kBACwB,W;AADxB;AACe,SAAS,WAAT,CAAqB,GAArB,EAA0B;AACvC,QAAM,SAAS,IAAI,OAAJ,CAAY,MAA3B;AACA,QAAM,qBAAqB,OAAO,GAAP,CAAW,oBAAX,CAA3B;AACA,MAAI,CAAC,kBAAL,EAAyB;AACvB,UAAM,IAAI,KAAJ,CAAU,qCAAV,CAAN;AACD;;AAED,MAAI,OAAJ,CAAY,qBAAZ,GAAoC,UAAU,SAAV,CAAoB,CAApB,KAA0B,mBAAmB,CAAnB,CAA9D;;AAEA,QAAM,gBAAgB,UAAU,SAAV,CAAoB,IAApB,CAAyB,YAAY;AACzD,UAAM,eAAe,SAAS,KAAT,CAAe,GAAf,EAAoB,CAApB,EAAuB,WAAvB,EAArB;AACA,QAAI,mBAAmB,OAAnB,CAA2B,YAA3B,QAAJ,EAAqD;AACnD,UAAI,OAAJ,CAAY,QAAZ,GAAuB,YAAvB;AACA,aAAO,IAAP;AACD;;AAED,WAAO,KAAP;AACD,GARqB,CAAtB;;AAUA,MAAI,CAAC,aAAL,EAAoB;AAClB,QAAI,OAAJ,CAAY,QAAZ,GAAuB,mBAAmB,CAAnB,CAAvB;AACD;AACF","file":"browser.js","sourcesContent":["/* global navigator */\nexport default function alpLanguage(app) {\n  const config = app.context.config;\n  const availableLanguages = config.get('availableLanguages');\n  if (!availableLanguages) {\n    throw new Error('Missing config \"availableLanguages\"');\n  }\n\n  app.context.firstAcceptedLanguage = navigator.languages[0] || availableLanguages[0];\n\n  const languageFound = navigator.languages.some(language => {\n    const languageCode = language.split('-')[0].toLowerCase();\n    if (availableLanguages.indexOf(languageCode) !== -1) {\n      app.context.language = languageCode;\n      return true;\n    }\n\n    return false;\n  });\n\n  if (!languageFound) {\n    app.context.language = availableLanguages[0];\n  }\n}\n"]}