{"version":3,"sources":["../src/browser.js"],"names":["alpLanguage","app","config","context","availableLanguages","get","Error","firstAcceptedLanguage","navigator","languages","languageFound","some","language","languageCode","split","toLowerCase","indexOf"],"mappings":"AAAA;AACA,eAAe,SAASA,WAAT,CAAqBC,GAArB,EAA0B;AACvC,QAAMC,SAASD,IAAIE,OAAJ,CAAYD,MAA3B;AACA,QAAME,qBAAqBF,OAAOG,GAAP,CAAW,oBAAX,CAA3B;AACA,MAAI,CAACD,kBAAL,EACE,MAAM,IAAIE,KAAJ,CAAU,qCAAV,CAAN;;AAGFL,MAAIE,OAAJ,CAAYI,qBAAZ,GAAoCC,UAAUC,SAAV,CAAoB,CAApB,KAA0BL,mBAAmB,CAAnB,CAPvB;;;AASvC,QAAMM,gBAAgBF,UAAUC,SAAV,CAAoBE,IAApB,CAAyBC,YAAY;AACzD,UAAMC,eAAeD,SAASE,KAAT,CAAe,GAAf,EAAoB,CAApB,EAAuBC,WAAvB,EAArB;AADyD,WAErDX,mBAAmBY,OAAnB,CAA2BH,YAA3B,MAA6C,CAAC,CAFO,KAGvDZ,IAAIE,OAAJ,CAAYS,QAAZ,GAAuBC,YAHgC,EAIhD,IAJgD;AAQ1D,GARqB,CAAtB;;AAUKH,eAnBkC,KAoBrCT,IAAIE,OAAJ,CAAYS,QAAZ,GAAuBR,mBAAmB,CAAnB,CApBc;AAsBxC","file":"browser.js","sourcesContent":["/* global navigator */\nexport default function alpLanguage(app) {\n  const config = app.context.config;\n  const availableLanguages = config.get('availableLanguages');\n  if (!availableLanguages) {\n    throw new Error('Missing config \"availableLanguages\"');\n  }\n\n  app.context.firstAcceptedLanguage = navigator.languages[0] || availableLanguages[0];\n\n  const languageFound = navigator.languages.some(language => {\n    const languageCode = language.split('-')[0].toLowerCase();\n    if (availableLanguages.indexOf(languageCode) !== -1) {\n      app.context.language = languageCode;\n      return true;\n    }\n\n    return false;\n  });\n\n  if (!languageFound) {\n    app.context.language = availableLanguages[0];\n  }\n}\n"]}