{"version":3,"sources":["../src/readRecursiveDirectory.js"],"names":["readdir","stat","fsStat","readRecursiveDirectory","directory","callback","Promise","resolve","reject","err","files","all","map","file","path","isDirectory","then","catch","filename","basedir"],"mappings":"AAAA,SAASA,OAAT,EAAkBC,QAAQC,MAA1B,QAAwC,IAAxC;;AAEA,eAAe,SAASC,sBAAT,CAAgCC,SAAhC,EAA2CC,QAA3C,EAAqD;AAClE,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCR,YAAQI,SAAR,EAAmB,CAACK,GAAD,EAAMC,KAAN,KAAgB;AACjC,UAAID,GAAJ,EAAS,OAAOD,OAAOC,GAAP,CAAP;;AAETH,cAAQK,GAAR,CAAYD,MAAME,GAAN,CAAWC,IAAD,IAAU;AAC9B,cAAMC,OAAQ,GAAEV,SAAU,IAAGS,IAAK,EAAlC;AACA,eAAO,IAAIP,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCN,iBAAOY,IAAP,EAAa,CAACL,GAAD,EAAMR,IAAN,KAAe;AAC1B,gBAAIQ,GAAJ,EAAS,OAAOD,OAAOC,GAAP,CAAP;;AAET,gBAAIR,QAAQA,KAAKc,WAAL,EAAZ,EAAgC;AAC9B,qBAAOZ,uBAAuBW,IAAvB,EAA6BT,QAA7B,EACJW,IADI,CACCT,OADD,EAEJU,KAFI,CAEET,MAFF,CAAP;AAGD;AACD,gBAAI;AACFF,sBAAQC,OAAR,CAAgBF,SAAS;AACvBa,0BAAUL,IADa;AAEvBM,yBAASf,SAFc;AAGvBU,oBAHuB;AAIvBb;AAJuB,eAAT,CAAhB,EAMGe,IANH,CAMQT,OANR,EAOGU,KAPH,CAOST,MAPT;AAQD,aATD,CASE,OAAOC,GAAP,EAAY;AACZ,qBAAOD,OAAOC,GAAP,CAAP;AACD;AACF,WApBD;AAqBD,SAtBM,CAAP;AAuBD,OAzBW,CAAZ,EAyBIO,IAzBJ,CAyBS,MAAMT,SAzBf;AA0BD,KA7BD;AA8BD,GA/BM,CAAP;AAgCD","file":"readRecursiveDirectory.js","sourcesContent":["import { readdir, stat as fsStat } from 'fs';\n\nexport default function readRecursiveDirectory(directory, callback) {\n  return new Promise((resolve, reject) => {\n    readdir(directory, (err, files) => {\n      if (err) return reject(err);\n\n      Promise.all(files.map((file) => {\n        const path = `${directory}/${file}`;\n        return new Promise((resolve, reject) => {\n          fsStat(path, (err, stat) => {\n            if (err) return reject(err);\n\n            if (stat && stat.isDirectory()) {\n              return readRecursiveDirectory(path, callback)\n                .then(resolve)\n                .catch(reject);\n            }\n            try {\n              Promise.resolve(callback({\n                filename: file,\n                basedir: directory,\n                path,\n                stat,\n              }))\n                .then(resolve)\n                .catch(reject);\n            } catch (err) {\n              return reject(err);\n            }\n          });\n        });\n      })).then(() => resolve());\n    });\n  });\n}\n"]}