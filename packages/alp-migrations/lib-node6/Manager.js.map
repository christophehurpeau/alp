{"version":3,"sources":["../src/Manager.js"],"names":["MigrationsManager","findLastVersion","store","findOne","created","then","row","version","addMigrationDone","migration","insertOne"],"mappings":";;;;;;AACA;;AAEe,MAAMA,iBAAN,+BAAgD;;AAG7DC,oBAAkB;AAChB,WAAO,KAAKC,KAAL,CAAWC,OAAX,CAAmB,EAAnB,EAAuB,EAAEC,WAAF,EAAvB,EACEC,IADF,CACOC,OAAOA,OAAOA,IAAIC,OADzB,CAAP;AAED;;AAEDC,mBAAiBC,SAAjB,EAA4B;AAC1B,WAAO,KAAKP,KAAL,CAAWQ,SAAX,CAAqBD,SAArB,CAAP;AACD;AAV4D;kBAA1CT,iB","file":"Manager.js","sourcesContent":["import MongoStore from 'liwi/mongo';\nimport { AbstractManager } from 'liwi';\n\nexport default class MigrationsManager extends AbstractManager {\n  store: MongoStore;\n\n  findLastVersion() {\n    return this.store.findOne({}, { created: -1 })\n            .then(row => row && row.version);\n  }\n\n  addMigrationDone(migration) {\n    return this.store.insertOne(migration);\n  }\n}\n"]}