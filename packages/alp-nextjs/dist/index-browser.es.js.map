{"version":3,"file":"index-browser.es.js","sources":["../src/createDocumentInitialProps.tsx","../src/index.tsx"],"sourcesContent":["import type NextDocument from 'next/document';\nimport type { ReactElement } from 'react';\n// eslint-disable-next-line import/no-unresolved\nimport { StyleSheet } from 'react-native';\n\n/**\n *\n * @example\n * ```\n * export { createGetDocumentInitialProps } from 'alp-nextjs';\n *\n * export default class MyDocument extends NextDocument {\n *   static getInitialProps = createGetDocumentInitialProps(() => <style>custom style</style>);\n * }\n * ```\n */\n\nexport function createDocumentInitialProps(\n  getMoreStyles?: () => ReactElement | ReactElement[],\n): (typeof NextDocument)['getInitialProps'] {\n  return async (ctx) => {\n    const page = await ctx.renderPage();\n\n    // @ts-expect-error -- RN doesn't have this type\n    const rnwStyle = StyleSheet.getSheet();\n\n    return {\n      ...page,\n      styles: (\n        <>\n          <style\n            dangerouslySetInnerHTML={{ __html: rnwStyle.textContent }}\n            id={rnwStyle.id}\n          />\n          {getMoreStyles?.()}\n        </>\n      ),\n    };\n  };\n}\n","import Cookies from 'cookies';\nimport type { GetServerSidePropsContext, NextPageContext } from 'next';\n\nexport { type NextPageContext, type GetServerSidePropsContext } from 'next';\n\nexport { createDocumentInitialProps } from './createDocumentInitialProps';\n\nexport const getServerCookieValue = (\n  ctx: GetServerSidePropsContext | NextPageContext,\n  cookieName: string,\n): string | null => {\n  if (!ctx.req || !ctx.res) {\n    throw new Error(\n      'Missing ctx.req or ctx.res. Make sure getInitialProps is set.',\n    );\n  }\n\n  const cookies = new Cookies(ctx.req, ctx.res);\n  return cookies.get(cookieName) || null;\n};\n"],"names":["createDocumentInitialProps","getMoreStyles","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ctx","page","rnwStyle","wrap","_callee$","_context","prev","next","renderPage","sent","StyleSheet","getSheet","abrupt","_extends","styles","_jsxs","_Fragment","children","_jsx","dangerouslySetInnerHTML","__html","textContent","id","stop","apply","arguments","getServerCookieValue","cookieName","req","res","Error","cookies","Cookies","get"],"mappings":";;;;;;;AAiBO,SAASA,0BAA0BA,CACxCC,aAAmD,EACT;AAC1C,EAAA,oBAAA,YAAA;IAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAO,SAAAC,OAAAA,CAAOC,GAAG,EAAA;MAAA,IAAAC,IAAA,EAAAC,QAAA,CAAA;AAAA,MAAA,OAAAL,mBAAA,EAAA,CAAAM,IAAA,CAAA,SAAAC,SAAAC,QAAA,EAAA;AAAA,QAAA,OAAA,CAAA,EAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,UAAA,KAAA,CAAA;AAAAF,YAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;AAAA,YAAA,OACIP,GAAG,CAACQ,UAAU,EAAE,CAAA;AAAA,UAAA,KAAA,CAAA;YAA7BP,IAAI,GAAAI,QAAA,CAAAI,IAAA,CAAA;AAEV;AACMP,YAAAA,QAAQ,GAAGQ,UAAU,CAACC,QAAQ,EAAE,CAAA;AAAA,YAAA,OAAAN,QAAA,CAAAO,MAAA,CAAAC,QAAAA,EAAAA,QAAA,KAGjCZ,IAAI,EAAA;cACPa,MAAM,eACJC,IAAA,CAAAC,QAAA,EAAA;AAAAC,gBAAAA,QAAA,gBACEC,GAAA,CAAA,OAAA,EAAA;AACEC,kBAAAA,uBAAuB,EAAE;oBAAEC,MAAM,EAAElB,QAAQ,CAACmB,WAAAA;mBAAc;kBAC1DC,EAAE,EAAEpB,QAAQ,CAACoB,EAAAA;AAAG,iBACjB,CAAC,EACD5B,aAAa,IAAbA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,aAAa,EAAI,CAAA;eAClB,CAAA;AACH,aAAA,CAAA,CAAA,CAAA;AAAA,UAAA,KAAA,CAAA,CAAA;AAAA,UAAA,KAAA,KAAA;YAAA,OAAAW,QAAA,CAAAkB,IAAA,EAAA,CAAA;AAAA,SAAA;AAAA,OAAA,EAAAxB,OAAA,CAAA,CAAA;KAEJ,CAAA,CAAA,CAAA;AAAA,IAAA,OAAA,YAAA;AAAA,MAAA,OAAAJ,IAAA,CAAA6B,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;AAAA,KAAA,CAAA;AAAA,GAAA,EAAA,CAAA;AACH;;AChCO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAC/B1B,GAAgD,EAChD2B,UAAkB,EACA;EAClB,IAAI,CAAC3B,GAAG,CAAC4B,GAAG,IAAI,CAAC5B,GAAG,CAAC6B,GAAG,EAAE;AACxB,IAAA,MAAM,IAAIC,KAAK,CACb,+DACF,CAAC,CAAA;AACH,GAAA;AAEA,EAAA,IAAMC,OAAO,GAAG,IAAIC,OAAO,CAAChC,GAAG,CAAC4B,GAAG,EAAE5B,GAAG,CAAC6B,GAAG,CAAC,CAAA;AAC7C,EAAA,OAAOE,OAAO,CAACE,GAAG,CAACN,UAAU,CAAC,IAAI,IAAI,CAAA;AACxC;;;;"}