{"version":3,"file":"index-browser.es.js","sources":["../src/getDocumentInitialProps.tsx","../src/index.tsx"],"sourcesContent":["import type NextDocument from 'next/document';\nimport type { DocumentContext } from 'next/document';\nimport { Main } from 'next/document';\nimport { Children } from 'react';\n// @ts-expect-error -- @types/react-native-web does not exists\nimport { AppRegistry } from 'react-native-web';\n\n// https://github.com/GeekyAnts/native-base-next-adapter/blob/master/document.js\n\n// Force Next-generated DOM elements to fill their parent's height\nexport const normalizeNextElementsCSS = `\n  html, body, #__next {\n    width: 100%;\n    /* To smooth any scrolling behavior */\n    -webkit-overflow-scrolling: touch;\n    margin: 0px;\n    padding: 0px;\n    /* Allows content to fill the viewport and go beyond the bottom */\n    min-height: 100%;\n  }\n  #__next {\n    flex-shrink: 0;\n    flex-basis: auto;\n    flex-direction: column;\n    flex-grow: 1;\n    display: flex;\n    flex: 1;\n  }\n  html {\n    scroll-behavior: smooth;\n    -webkit-text-size-adjust: 100%;\n    height: 100%;\n  }\n  body {\n    display: flex;\n    overflow-y: auto;\n    overscroll-behavior-y: none;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -ms-overflow-style: scrollbar;\n  }\n`;\n\n/**\n *\n * @example\n * ```\n * export { getDocumentInitialProps as getInitialProps } from 'alp-nextjs';\n *\n * export default class MyDocument extends NextDocument {\n *   static getInitialProps = getDocumentInitialProps;\n * }\n * ```\n */\nexport async function getDocumentInitialProps(\n  ctx: DocumentContext,\n): ReturnType<(typeof NextDocument)['getInitialProps']> {\n  AppRegistry.registerComponent('Main', () => Main);\n  const { getStyleElement } = AppRegistry.getApplication('Main');\n  const page = await ctx.renderPage();\n  const styles = [\n    <style dangerouslySetInnerHTML={{ __html: normalizeNextElementsCSS }} />,\n    getStyleElement(),\n  ];\n  return { ...page, styles: Children.toArray(styles) };\n}\n","import Cookies from 'cookies';\nimport type { GetServerSidePropsContext, NextPageContext } from 'next';\n\nexport { type NextPageContext, type GetServerSidePropsContext } from 'next';\n\nexport {\n  normalizeNextElementsCSS,\n  getDocumentInitialProps,\n} from './getDocumentInitialProps';\n\nexport const getServerCookieValue = (\n  ctx: NextPageContext | GetServerSidePropsContext,\n  cookieName: string,\n): string | undefined => {\n  if (!ctx.req || !ctx.res) {\n    throw new Error(\n      'Missing ctx.req or ctx.res. Make sure getInitialProps is set.',\n    );\n  }\n\n  const cookies = new Cookies(ctx.req, ctx.res);\n  return cookies.get(cookieName);\n};\n"],"names":["normalizeNextElementsCSS","getDocumentInitialProps","_getDocumentInitialProps","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ctx","_AppRegistry$getAppli","getStyleElement","page","styles","wrap","_callee$","_context","prev","next","AppRegistry","registerComponent","Main","getApplication","renderPage","sent","_jsx","dangerouslySetInnerHTML","__html","abrupt","_extends","Children","toArray","stop","getServerCookieValue","cookieName","req","res","Error","cookies","Cookies","get"],"mappings":";;;;;;;;;AAUO,IAAMA,wBAAwB,GAgCpC,8vBAAA;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAsBC,uBAAuBA,GAAA;AAAA,EAAA,OAAAC,wBAAA,CAAAC,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;AAAA,CAAA;AAW5C,SAAAF,wBAAA,GAAA;EAAAA,wBAAA,GAAAG,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAXM,SAAAC,OAAAA,CACLC,GAAoB,EAAA;AAAA,IAAA,IAAAC,qBAAA,EAAAC,eAAA,EAAAC,IAAA,EAAAC,MAAA,CAAA;AAAA,IAAA,OAAAP,mBAAA,EAAA,CAAAQ,IAAA,CAAA,SAAAC,SAAAC,QAAA,EAAA;AAAA,MAAA,OAAA,CAAA,EAAA;AAAA,QAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,UAAA,KAAA,CAAA;AAEpBC,YAAAA,WAAW,CAACC,iBAAiB,CAAC,MAAM,EAAE,YAAA;AAAA,cAAA,OAAMC,IAAI,CAAA;aAAC,CAAA,CAAA;AAACX,YAAAA,qBAAA,GACtBS,WAAW,CAACG,cAAc,CAAC,MAAM,CAAC,EAAtDX,eAAe,GAAAD,qBAAA,CAAfC,eAAe,CAAA;AAAAK,YAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;YAAA,OACJT,GAAG,CAACc,UAAU,EAAE,CAAA;AAAA,UAAA,KAAA,CAAA;YAA7BX,IAAI,GAAAI,QAAA,CAAAQ,IAAA,CAAA;YACJX,MAAM,GAAG,cACbY,GAAA,CAAA,OAAA,EAAA;AAAOC,cAAAA,uBAAuB,EAAE;AAAEC,gBAAAA,MAAM,EAAE3B,wBAAAA;AAAyB,eAAA;aAAK,CAAA,EACxEW,eAAe,EAAE,CAClB,CAAA;AAAA,YAAA,OAAAK,QAAA,CAAAY,MAAA,CAAAC,QAAAA,EAAAA,QAAA,KACWjB,IAAI,EAAA;AAAEC,cAAAA,MAAM,EAAEiB,QAAQ,CAACC,OAAO,CAAClB,MAAM,CAAA;AAAC,aAAA,CAAA,CAAA,CAAA;AAAA,UAAA,KAAA,CAAA,CAAA;AAAA,UAAA,KAAA,KAAA;YAAA,OAAAG,QAAA,CAAAgB,IAAA,EAAA,CAAA;AAAA,SAAA;AAAA,OAAA;AAAA,KAAA,EAAAxB,OAAA,CAAA,CAAA;GACnD,CAAA,CAAA,CAAA;AAAA,EAAA,OAAAN,wBAAA,CAAAC,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;AAAA;;ACxDM,IAAM6B,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAC/BxB,GAAgD,EAChDyB,UAAkB,EACK;EACvB,IAAI,CAACzB,GAAG,CAAC0B,GAAG,IAAI,CAAC1B,GAAG,CAAC2B,GAAG,EAAE;AACxB,IAAA,MAAM,IAAIC,KAAK,CACb,+DAA+D,CAChE,CAAA;AACH,GAAA;AAEA,EAAA,IAAMC,OAAO,GAAG,IAAIC,OAAO,CAAC9B,GAAG,CAAC0B,GAAG,EAAE1B,GAAG,CAAC2B,GAAG,CAAC,CAAA;AAC7C,EAAA,OAAOE,OAAO,CAACE,GAAG,CAACN,UAAU,CAAC,CAAA;AAChC;;;;"}