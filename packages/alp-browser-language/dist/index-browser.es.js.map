{"version":3,"file":"index-browser.es.js","sources":["../src/index.ts"],"sourcesContent":["import { BrowserApplicationInCreation } from 'alp-types';\n\nexport default function alpLanguage(app: BrowserApplicationInCreation) {\n  const config = app.context.config;\n  const availableLanguages = config.get('availableLanguages');\n  if (!availableLanguages) {\n    throw new Error('Missing config \"availableLanguages\"');\n  }\n\n  app.context.firstAcceptedLanguage =\n    navigator.languages[0] || availableLanguages[0];\n\n  const languageFound = navigator.languages.some((language) => {\n    const languageCode = language.split('-')[0].toLowerCase();\n    if (availableLanguages.indexOf(languageCode) !== -1) {\n      app.context.language = languageCode;\n      return true;\n    }\n\n    return false;\n  });\n\n  if (!languageFound) {\n    app.context.language = availableLanguages[0];\n  }\n}\n"],"names":["alpLanguage","app","config","context","availableLanguages","get","Error","firstAcceptedLanguage","navigator","languages","languageFound","some","language","languageCode","split","toLowerCase","indexOf"],"mappings":"AAEe,SAASA,WAAT,CAAqBC,GAArB,EAAwD;MAC/DC,MAAM,GAAGD,GAAG,CAACE,OAAJ,CAAYD,MAA3B;MACME,kBAAkB,GAAGF,MAAM,CAACG,GAAP,CAAW,oBAAX,CAA3B;;MACI,CAACD,kBAAL,EAAyB;UACjB,IAAIE,KAAJ,CAAU,qCAAV,CAAN;;;EAGFL,GAAG,CAACE,OAAJ,CAAYI,qBAAZ,GACEC,SAAS,CAACC,SAAV,CAAoB,CAApB,KAA0BL,kBAAkB,CAAC,CAAD,CAD9C;MAGMM,aAAa,GAAGF,SAAS,CAACC,SAAV,CAAoBE,IAApB,CAAyB,UAACC,QAAD,EAAc;QACrDC,YAAY,GAAGD,QAAQ,CAACE,KAAT,CAAe,GAAf,EAAoB,CAApB,EAAuBC,WAAvB,EAArB;;QACIX,kBAAkB,CAACY,OAAnB,CAA2BH,YAA3B,MAA6C,CAAC,CAAlD,EAAqD;MACnDZ,GAAG,CAACE,OAAJ,CAAYS,QAAZ,GAAuBC,YAAvB;aACO,IAAP;;;WAGK,KAAP;GAPoB,CAAtB;;MAUI,CAACH,aAAL,EAAoB;IAClBT,GAAG,CAACE,OAAJ,CAAYS,QAAZ,GAAuBR,kBAAkB,CAAC,CAAD,CAAzC;;;;;;"}