{"version":3,"sources":["../../../src/services/user/userAccountGoogleService.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;;;kBAEe,uBAAI,MAAM,wBAAN,0BAAoD;AAAA;AAAA;;AAAA,iDAKnE,WALmE,GAKrD,QALqD;AAAA;;AAOnE,eAAW,MAAX,EAAmB;AACf,eAAO,MAAM,CAAC,2DAAD,GAA8D,OAAO,WAArE,EAAiF,AAAjF,CAAN,EACF,IADE,CACI,QAAD,IAAc,SAAS,IAAT,EADjB,CAAP;AAEH;;AAED,cAAU,OAAV,EAAmB,OAAnB,EAA4B;AACxB,eAAO,QAAQ,QAAR,KAAqB,QAAQ,EAApC;AACH;;AAED,UAAM,OAAN,EAAe;AACX,eAAO,QAAQ,EAAf;AACH;;AAED,mBAAe,OAAf,EAAwB;AACpB,eAAO,QAAQ,KAAf;AACH;;AAED,cAAU,OAAV,EAAmB,WAAnB,EAAgC;AAC5B,cAAM,SAAS,EAAf;;AAEA,YAAI,QAAQ,KAAZ,EAAmB;AACf,mBAAO,IAAP,CAAY,QAAQ,KAApB;AACH;;AAED,YAAI,YAAY,MAAhB,EAAwB;AACpB,wBAAY,MAAZ,CAAmB,OAAnB,CAA4B,KAAD,IAAW;AAClC,oBAAI,OAAO,OAAP,CAAe,MAAM,KAArB,QAAJ,EAAwC;AACpC,2BAAO,IAAP,CAAY,MAAM,KAAlB;AACH;AACJ,aAJD;AAKH;;AAED,eAAO,MAAP;AACH;;AAED,mBAAe,OAAf,EAAwB;AACpB,eAAO,QAAQ,IAAf;AACH;;AAED,gBAAY,OAAZ,EAAqB;AACjB,eAAO;AACH,uBAAW,QAAQ,UADhB;AAEH,wBAAY,QAAQ;AAFjB,SAAP;AAIH;;AAED,oBAAgB,QAAhB,EAA0B;AACtB,eAAO,KAAK,QAAL,CAAc,QAAd,CAAP;AACH;;AAED,aAAS,QAAT,EAAmB,QAAnB,EAA6B;AACzB,eAAO,CAAC,QAAD,GAAY,SAAS,KAAT,CAAe,GAAf,CAAZ,GAAkC,SAAS,MAAT,CAAgB,SAAS,KAAT,CAAe,GAAf,CAAhB,EACpC,MADoC,CAC7B,CAAC,IAAD,EAAO,CAAP,EAAU,EAAV,KAAiB,GAAG,OAAH,CAAW,IAAX,MAAqB,CADT,CAAzC;AAEH;AA5DkE,CAAxD,SACJ,eADI,GACc;AACrB,WAAO;AADc,CADd,W","file":"userAccountGoogleService.js","sourcesContent":["import EventEmitter from 'events';\n\nexport default new class UserAccountGoogleService extends EventEmitter {\n    static scopeKeyToScope = {\n        login: 'openid profile email https://www.googleapis.com/auth/plus.profile.emails.read',\n    };\n\n    providerKey = 'google';\n\n    getProfile(tokens) {\n        return fetch(`https://www.googleapis.com/oauth2/v1/userinfo?access_token=${tokens.accessToken}`)\n            .then((response) => response.json());\n    }\n\n    isAccount(account, profile) {\n        return account.googleId === profile.id;\n    }\n\n    getId(profile) {\n        return profile.id;\n    }\n\n    getAccountName(profile) {\n        return profile.email;\n    }\n\n    getEmails(profile, plusProfile) {\n        const emails = [];\n\n        if (profile.email) {\n            emails.push(profile.email);\n        }\n\n        if (plusProfile.emails) {\n            plusProfile.emails.forEach((email) => {\n                if (emails.indexOf(email.value) === -1) {\n                    emails.push(email.value);\n                }\n            });\n        }\n\n        return emails;\n    }\n\n    getDisplayName(profile) {\n        return profile.name;\n    }\n\n    getFullName(profile) {\n        return {\n            givenName: profile.given_name,\n            familyName: profile.family_name,\n        };\n    }\n\n    getDefaultScope(newScope) {\n        return this.getScope(newScope);\n    }\n\n    getScope(oldScope, newScope) {\n        return !oldScope ? newScope.split(' ') : oldScope.concat(newScope.split(' '))\n            .filter((item, i, ar) => ar.indexOf(item) === i);\n    }\n};\n"]}