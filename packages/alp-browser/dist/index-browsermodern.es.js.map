{"version":3,"file":"index-browsermodern.es.js","sources":["../src/index.js"],"sourcesContent":["/* global window */\nimport Ibex from 'ibex/src';\nimport config from 'alp-config/src';\nimport language from 'alp-language/src';\nimport translate from 'alp-translate/src';\nimport Logger from 'nightingale-logger/src';\n\nexport { Config } from 'alp-config/src';\n\nconst logger = new Logger('alp');\n\ntype OptionsType = {\n  version: ?string, // default to window.VERSION\n};\n\nexport default class AlpBrowser extends Ibex {\n  path: string;\n  appVersion: string;\n\n  constructor(path = '/', { version = window.VERSION }: OptionsType = {}) {\n    super();\n    this.path = path;\n    this.appVersion = window.VERSION;\n  }\n\n  async init() {\n    await config('/config')(this);\n    language(this);\n    await translate('/locales')(this);\n  }\n\n  get environment() {\n    return this.env;\n  }\n\n  start(fn: Function) {\n    fn().then(() => logger.success('started')).catch(err => logger.error('start fail', { err }));\n  }\n}\n"],"names":["logger","Logger","AlpBrowser","Ibex","path","version","window","VERSION","appVersion","init","config","translate","environment","env","fn","then","success","catch","error","err"],"mappings":";;;;;;;AAAA;AACA;AAQA,MAAMA,SAAS,IAAIC,MAAJ,CAAW,KAAX,CAAf;;IAMqBC,aAAN,cAAyBC,IAAzB,CAA8B;;cAI/BC,OAAO,GAAnB,EAAwB,EAAEC,UAAUC,OAAOC,OAAnB,OAAxB,EAAwE;;SAEjEH,IAAL,GAAYA,IAAZ;SACKI,UAAL,GAAkBF,OAAOC,OAAzB;;;QAGIE,IAAN,GAAa;UACLC,OAAO,SAAP,EAAkB,IAAlB,CAAN;aACS,IAAT;UACMC,UAAU,UAAV,EAAsB,IAAtB,CAAN;;;MAGEC,WAAJ,GAAkB;WACT,KAAKC,GAAZ;;;QAGIC,EAAN,EAAoB;SACbC,IAAL,CAAU;aAAMf,OAAOgB,OAAP,CAAe,SAAf,CAAN;KAAV,EAA2CC,KAA3C,CAAiD;aAAOjB,OAAOkB,KAAP,CAAa,YAAb,EAA2B,EAAEC,GAAF,EAA3B,CAAP;KAAjD;;;;;;"}