{"version":3,"sources":["../src/browserStoredConfig.js"],"names":[],"mappings":"AAAA;AACA,OAAO,UAAP,MAAuB,iBAAvB;AACA,OAAO,SAAP,MAAsB,0BAAtB;AACA,OAAO,SAAP,MAAsB,gBAAtB;;AAEA,IAAM,MAAM,CAAC,MAAM;AACf,QAAM,SAAS,aAAa,OAAb,CAAqB,aAArB,CAAf;AACA,QAAI,WAAW,IAAf,EAAqB;AACjB,eAAO,IAAI,GAAJ,EAAP;AACH;;AAED,WAAO,UAAU,MAAV,CAAP;AACH,CAPW,GAAZ;;AASA,IAAI,OAAJ,CAAY,SAAS,WAAW,KAAX,CAArB;;AAEA,OAAO,SAAS,UAAT,GAAsB;AACzB,WAAO,IAAI,GAAJ,CAAQ,SAAR,CAAP;AACH;;AAED,OAAO,SAAS,GAAT,CAAa,GAAb,EAAkB;AACrB,WAAO,IAAI,GAAJ,CAAQ,GAAR,CAAP;AACH;;AAED,OAAO,SAAS,GAAT,CAAa,GAAb,EAAkB;AACrB,WAAO,IAAI,GAAJ,CAAQ,GAAR,CAAP;AACH;;AAED,OAAO,SAAS,IAAT,GAAgB;AACnB,iBAAa,OAAb,CAAqB,aAArB,EAAoC,UAAU,GAAV,CAApC;AACH;;AAED,OAAO,SAAS,GAAT,CAAa,GAAb,EAAkB,KAAlB,EAAyB;AAC5B,QAAI,GAAJ,CAAQ,GAAR,EAAa,KAAb;AACA;AACH;;AAED,OAAO,SAAS,KAAT,CAAe,OAAf,EAAwB;AAC3B,QAAI,KAAJ;AACA,QAAI,GAAJ,CAAQ,SAAR,EAAmB,OAAnB;AACA;AACH","file":"browserStoredConfig.js","sourcesContent":["/* global localStorage */\nimport deepFreeze from 'deep-freeze-es6';\nimport parseJSON from 'parse-json-object-as-map';\nimport stringify from 'stringify-json';\n\nconst map = (() => {\n    const config = localStorage.getItem('ibex-config');\n    if (config === null) {\n        return new Map();\n    }\n\n    return parseJSON(config);\n})();\n\nmap.forEach(value => deepFreeze(value));\n\nexport function getVersion() {\n    return map.get('version');\n}\n\nexport function has(key) {\n    return map.has(key);\n}\n\nexport function get(key) {\n    return map.get(key);\n}\n\nexport function save() {\n    localStorage.setItem('ibex-config', stringify(map));\n}\n\nexport function set(key, value) {\n    map.set(key, value);\n    save();\n}\n\nexport function clear(version) {\n    map.clear();\n    map.set('version', version);\n    save();\n}\n"]}