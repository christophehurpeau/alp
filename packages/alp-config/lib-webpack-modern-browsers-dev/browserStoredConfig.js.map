{"version":3,"sources":["../src/browserStoredConfig.js"],"names":["deepFreeze","parseJSON","stringify","map","config","localStorage","getItem","Map","forEach","value","getVersion","get","has","key","save","setItem","set","clear","version"],"mappings":"AAAA;AACA,OAAOA,UAAP,MAAuB,iBAAvB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;;AAEA,MAAMC,MAAO,YAAM;AACjB,QAAMC,SAASC,aAAaC,OAAb,CAAqB,aAArB,CAAf;AACA,MAAIF,WAAW,IAAf,EAAqB;AACnB,WAAO,IAAIG,GAAJ,EAAP;AACD;;AAED,SAAON,UAAUG,MAAV,CAAP;AACD,CAPW,EAAZ;;AASAD,IAAIK,OAAJ,CAAY;AAAA,SAASR,WAAWS,KAAX,CAAT;AAAA,CAAZ;;AAEA,OAAO,SAASC,UAAT,GAAsB;AAC3B,SAAOP,IAAIQ,GAAJ,CAAQ,SAAR,CAAP;AACD;;AAED,OAAO,SAASC,GAAT,CAAaC,GAAb,EAAkB;AACvB,SAAOV,IAAIS,GAAJ,CAAQC,GAAR,CAAP;AACD;;AAED,OAAO,SAASF,GAAT,CAAaE,GAAb,EAAkB;AACvB,SAAOV,IAAIQ,GAAJ,CAAQE,GAAR,CAAP;AACD;;AAED,OAAO,SAASC,IAAT,GAAgB;AACrBT,eAAaU,OAAb,CAAqB,aAArB,EAAoCb,UAAUC,GAAV,CAApC;AACD;;AAED,OAAO,SAASa,GAAT,CAAaH,GAAb,EAAkBJ,KAAlB,EAAyB;AAC9BN,MAAIa,GAAJ,CAAQH,GAAR,EAAaJ,KAAb;AACAK;AACD;;AAED,OAAO,SAASG,KAAT,CAAeC,OAAf,EAAwB;AAC7Bf,MAAIc,KAAJ;AACAd,MAAIa,GAAJ,CAAQ,SAAR,EAAmBE,OAAnB;AACAJ;AACD","file":"browserStoredConfig.js","sourcesContent":["/* global localStorage */\nimport deepFreeze from 'deep-freeze-es6';\nimport parseJSON from 'parse-json-object-as-map';\nimport stringify from 'stringify-json';\n\nconst map = (() => {\n  const config = localStorage.getItem('ibex-config');\n  if (config === null) {\n    return new Map();\n  }\n\n  return parseJSON(config);\n})();\n\nmap.forEach(value => deepFreeze(value));\n\nexport function getVersion() {\n  return map.get('version');\n}\n\nexport function has(key) {\n  return map.has(key);\n}\n\nexport function get(key) {\n  return map.get(key);\n}\n\nexport function save() {\n  localStorage.setItem('ibex-config', stringify(map));\n}\n\nexport function set(key, value) {\n  map.set(key, value);\n  save();\n}\n\nexport function clear(version) {\n  map.clear();\n  map.set('version', version);\n  save();\n}\n"]}