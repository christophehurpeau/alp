{"version":3,"sources":["../src/node.js"],"names":[],"mappings":"AAAA,OAAO,IAAP,MAAiB,QAAjB;;AAEA,eAAe,SAAS,YAAT,CAAsB,OAAtB,EAA+B;AAC1C,cAAU,QAAQ,OAAR,CAAgB,MAAhB,EAAwB,GAAxB,CAAV;AACA,WAAO,OAAO;AACV,eAAO,MAAP,CAAc,IAAI,OAAlB,EAA2B;AACvB,cAAE,GAAF,EAAe,IAAf,EAAsC;AAClC,oBAAM,MAAM,IAAI,YAAJ,CAAiB,GAAjB,CAAqB,KAAK,QAA1B,EAAoC,GAApC,CAAwC,GAAxC,CAAZ;AACA,oBAAI,CAAC,GAAL,EAAU,OAAO,GAAP;AACV,uBAAO,IAAI,MAAJ,CAAW,IAAX,CAAP;AACH;AALsB,SAA3B;;AAQA,YAAI,YAAJ,GAAmB,IAAI,GAAJ,EAAnB;AACA,YAAI,MAAJ,CAAW,GAAX,CAAe,oBAAf,EAAqC,OAArC,CAA6C,YAAY;AACrD,gBAAM,eAAe,IAAI,cAAJ,CAAmB,UAAU,QAA7B,CAArB;AACA,gBAAI,YAAJ,CAAiB,GAAjB,CAAqB,QAArB,EAA+B,KAAK,YAAL,EAAmB,QAAnB,CAA/B;AACH,SAHD;AAIH,KAdD;AAeH","file":"node.js","sourcesContent":["import load from './load';\n\nexport default function alpTranslate(dirname) {\n    dirname = dirname.replace(/\\/*$/, '/');\n    return app => {\n        Object.assign(app.context, {\n            t(key: string, args: ?Object): string {\n                const msg = app.translations.get(this.language).get(key);\n                if (!msg) return key;\n                return msg.format(args);\n            },\n        });\n\n        app.translations = new Map();\n        app.config.get('availableLanguages').forEach(language => {\n            const translations = app.loadConfigSync(dirname + language);\n            app.translations.set(language, load(translations, language));\n        });\n    };\n}\n"]}