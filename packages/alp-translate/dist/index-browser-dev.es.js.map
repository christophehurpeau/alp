{"version":3,"file":"index-browser-dev.es.js","sources":["../src/load.js","../src/browser.js"],"sourcesContent":["import IntlMessageFormat from 'intl-messageformat';\n\nexport default function load(\n  translations: Map<string, any>,\n  language: string,\n): Map<string, IntlMessageFormat> {\n  const result = new Map();\n\n  (function loadMap(map, prefix) {\n    map.forEach((value, key) => {\n      if (typeof value === 'object') {\n        return loadMap(value, `${prefix}${key}.`);\n      }\n\n      result.set(`${prefix}${key}`, new IntlMessageFormat(value, language));\n    });\n  })(translations, '');\n\n  return result;\n}\n","import load from './load';\n\nexport default function alpTranslate(dirname: string) {\n  dirname = dirname.replace(/\\/*$/, '/');\n  return app => {\n    Object.assign(app.context, {\n      t(key: string, args: ?Object): string {\n        const msg = app.translations.get(key);\n        if (!msg) return key;\n        return msg.format(args);\n      },\n    });\n\n    const language = app.context.language;\n    return app.loadConfig(dirname + language).then(map => {\n      app.translations = load(map, language);\n      return map;\n    });\n  };\n}\n"],"names":["load","translations","language","result","Map","loadMap","map","prefix","forEach","value","key","set","IntlMessageFormat","alpTranslate","dirname","_t","replace","assign","app","context","args","msg","get","format","loadConfig","then"],"mappings":";;;;;;;;;AAEe,SAASA,IAAT,CACbC,YADa,EAEbC,QAFa,EAGmB;0BAFpB,aAAM,UAAN,EAAc,OAAd,CAEoB;;sBADxB,UACwB;;6BAA/B,aAAI,UAAJ,EAAY,wBAAZ,CAA+B;;;;;MAC1BC,SAAS,IAAIC,GAAJ,EAAf;;GAEC,SAASC,OAAT,CAAiBC,GAAjB,EAAsBC,MAAtB,EAA8B;QACzBC,OAAJ,CAAY,UAACC,KAAD,EAAQC,GAAR,EAAgB;UACtB,QAAOD,KAAP,yCAAOA,KAAP,OAAiB,QAArB,EAA+B;eACtBJ,QAAQI,KAAR,OAAkBF,MAAlB,GAA2BG,GAA3B,OAAP;;;aAGKC,GAAP,MAAcJ,MAAd,GAAuBG,GAAvB,EAA8B,IAAIE,iBAAJ,CAAsBH,KAAtB,EAA6BP,QAA7B,CAA9B;KALF;GADF,EAQGD,YARH,EAQiB,EARjB;;4BAUOE,MAAP;;;AChBa,SAASU,YAAT,CAAsBC,OAAtB,EAAuC;qBAAVC,UAAU;;;;gCAC1CD,QAAQE,OAAR,CAAgB,MAAhB,EAAwB,GAAxB,CAAV;SACO,eAAO;WACLC,MAAP,CAAcC,IAAIC,OAAlB,EAA2B;OAAA,gBACvBT,GADuB,EACVU,IADU,EACa;uBAAjCL,UAAiC;;wBAAnBA,WAAGA,UAAH,CAAmB;;mCAAPA,UAAO;;;;;;YAC9BM,MAAMH,IAAIjB,YAAJ,CAAiBqB,GAAjB,CAAqBZ,GAArB,CAAZ;YACI,CAACW,GAAL,EAAU,0BAAOX,GAAP;kCACHW,IAAIE,MAAJ,CAAWH,IAAX,CAAP;;KAJJ;;QAQMlB,WAAWgB,IAAIC,OAAJ,CAAYjB,QAA7B;WACOgB,IAAIM,UAAJ,CAAeV,UAAUZ,QAAzB,EAAmCuB,IAAnC,CAAwC,eAAO;UAChDxB,YAAJ,GAAmBD,KAAKM,GAAL,EAAUJ,QAAV,CAAnB;aACOI,GAAP;KAFK,CAAP;GAVF;;;;;"}