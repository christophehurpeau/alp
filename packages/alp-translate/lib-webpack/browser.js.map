{"version":3,"sources":["../src/browser.js"],"names":["load","alpTranslate","dirname","replace","Object","assign","app","context","t","key","args","msg","translations","get","format","language","loadConfig","then","map"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,QAAjB;;AAEA,eAAe,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;AAC5CA,YAAUA,QAAQC,OAAR,CAAgB,MAAhB,EAAwB,GAAxB,CAAV;AACA,SAAO,eAAO;AACZC,WAAOC,MAAP,CAAcC,IAAIC,OAAlB,EAA2B;AACzBC,OADyB,aACvBC,GADuB,EACVC,IADU,EACa;AACpC,YAAMC,MAAML,IAAIM,YAAJ,CAAiBC,GAAjB,CAAqBJ,GAArB,CAAZ;AACA,YAAI,CAACE,GAAL,EAAU,OAAOF,GAAP;AACV,eAAOE,IAAIG,MAAJ,CAAWJ,IAAX,CAAP;AACD;AALwB,KAA3B;;AAQA,QAAMK,WAAWT,IAAIC,OAAJ,CAAYQ,QAA7B;AACA,WAAOT,IAAIU,UAAJ,CAAed,UAAUa,QAAzB,EACEE,IADF,CACO;AAAA,aAAOX,IAAIM,YAAJ,GAAmBZ,KAAKkB,GAAL,EAAUH,QAAV,CAA1B;AAAA,KADP,CAAP;AAED,GAZD;AAaD","file":"browser.js","sourcesContent":["import load from './load';\n\nexport default function alpTranslate(dirname) {\n  dirname = dirname.replace(/\\/*$/, '/');\n  return app => {\n    Object.assign(app.context, {\n      t(key: string, args: ?Object): string {\n        const msg = app.translations.get(key);\n        if (!msg) return key;\n        return msg.format(args);\n      },\n    });\n\n    const language = app.context.language;\n    return app.loadConfig(dirname + language)\n            .then(map => app.translations = load(map, language));\n  };\n}\n"]}