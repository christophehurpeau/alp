{"version":3,"sources":["../src/browser.js"],"names":["alpTranslate","dirname","replace","app","Object","assign","context","t","key","args","msg","translations","get","format","language","loadConfig","then","map"],"mappings":";;;;;kBAEwBA,Y;;;;;;AAFxB;;;;;;AAEe,SAASA,YAAT,CAAsBC,OAAtB,EAA+B;AAC5CA,YAAUA,QAAQC,OAAR,CAAgB,MAAhB,EAAwB,GAAxB,CAAV;AACA,SAAOC,OAAO;AACZC,WAAOC,MAAP,CAAcF,IAAIG,OAAlB,EAA2B;AACzBC,QAAEC,GAAF,EAAeC,IAAf,EAAsC;AAAA,gBAApCD,GAAoC;;AAAA,gBAAvBC,IAAuB;;AAAA;AACpC,gBAAMC,MAAMP,IAAIQ,YAAJ,CAAiBC,GAAjB,CAAqBJ,GAArB,CAAZ;AACA,cAAI,CAACE,GAAL,EAAU,OAAOF,GAAP;AACV,iBAAOE,IAAIG,MAAJ,CAAWJ,IAAX,CAAP;AAHoC;AAIrC;AALwB,KAA3B;;AAQA,UAAMK,WAAWX,IAAIG,OAAJ,CAAYQ,QAA7B;AACA,WAAOX,IAAIY,UAAJ,CAAed,UAAUa,QAAzB,EACEE,IADF,CACOC,OAAOd,IAAIQ,YAAJ,GAAmB,oBAAKM,GAAL,EAAUH,QAAV,CADjC,CAAP;AAED,GAZD;AAaD","file":"browser.js","sourcesContent":["import load from './load';\n\nexport default function alpTranslate(dirname) {\n  dirname = dirname.replace(/\\/*$/, '/');\n  return app => {\n    Object.assign(app.context, {\n      t(key: string, args: ?Object): string {\n        const msg = app.translations.get(key);\n        if (!msg) return key;\n        return msg.format(args);\n      },\n    });\n\n    const language = app.context.language;\n    return app.loadConfig(dirname + language)\n            .then(map => app.translations = load(map, language));\n  };\n}\n"]}